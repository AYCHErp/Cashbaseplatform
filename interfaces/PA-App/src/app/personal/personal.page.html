<ion-header>
  <ion-toolbar color="primary">
    <ion-title>
      {{ 'PERSONAL'|translate }}
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content color="medium" class="ion-padding-vertical">

  <details class="debug--container" *ngIf="isDebug">
    <summary class="debug--toggle">DEBUG:</summary>

    Init():<br>
    <ion-button id="debugGetCountries" (click)="getCountries()">API: GET Countries</ion-button>
    <br>
    Interactive:<br>
    <ion-button (click)="getProgramsByCountryId(countryChoice)">API: GET Programs By Country</ion-button>
    <br>
    <ion-button (click)="getProgramById(programChoice)">API: GET Program Details By Id</ion-button>
    <br>
    <ion-button (click)="getTimeslots(programChoice)">API: GET Timeslots</ion-button>

  </details>


  <section #selectCountry [hidden]="!countries">
    <dialogue-turn>
      Where are you currently located?
    </dialogue-turn>
    <dialogue-turn actor="self">
      I'm currently located in:

      <ion-radio-group [(ngModel)]="countryChoice"
                       (ionChange)="setCountryChoiceName(countryChoice)"
      >
        <ion-item *ngFor="let country of countries"
                  color="light"
                  class="ion-no-padding ion-text-wrap"
        >
          <ion-label>{{ country.country }}</ion-label>
          <ion-radio value="{{ country.id }}"></ion-radio>
        </ion-item>
      </ion-radio-group>
    </dialogue-turn>
  </section>


  <section #selectProgram [hidden]="!(programs && countryChoice)">
    <dialogue-turn>
      We'll show you programs from <strong>{{ countryChoiceName }}</strong>.
      <br>
      Select a program:
    </dialogue-turn>
    <dialogue-turn actor="self">
      I'm interested in:

      <ion-radio-group [(ngModel)]="programChoice">
        <ion-item *ngFor="let program of programs"
                  color="light"
                  class="ion-no-padding ion-text-wrap"
        >
          <ion-label>
            Program #{{ program.id }}<br>
            <ion-note>{{ program.title }}</ion-note>
          </ion-label>
          <ion-radio value="{{ program.id }}"></ion-radio>
        </ion-item>
      </ion-radio-group>
    </dialogue-turn>
  </section>

  <section [hidden]="!(programTitle && programChoice)">
    <dialogue-turn>
      We'll show you details for <strong>{{programTitle}}</strong>
      <br>
      <ul>
        <li>Distribution channel: {{programDistributionChannel}}</li>
      </ul>
    </dialogue-turn>
  </section>

  <section #selectAppointment [hidden]="!(timeslots && programChoice)">
    <dialogue-turn>
      Select a timeslot:
    </dialogue-turn>
    <dialogue-turn actor="self">
      I want...:

      <ion-radio-group [(ngModel)]="timeslotChoice">
        <ion-item *ngFor="let timeslot of timeslots"
                  color="light"
                  class="ion-no-padding ion-text-wrap"
        >
          <ion-label>
            Timeslot {{timeslot.id}}:<br>
            <ion-note>{{timeslot.startDate}} - {{timeslot.endDate}}</ion-note><br>
            <ion-note>({{ timeslot.location }})</ion-note>
          </ion-label>
          <ion-radio value="{{ timeslot.id }}"></ion-radio>
        </ion-item>
      </ion-radio-group>
      <br>
      <ion-button (click)="postAppointment(timeslotChoice,'did:sov:2wJPyULfLLnYTEFYzByfUR')">
        Test Post Appointment API
      </ion-button>
    </dialogue-turn>
  </section>


</ion-content>
